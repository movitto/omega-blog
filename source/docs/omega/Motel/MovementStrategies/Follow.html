<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Motel::MovementStrategies::Follow
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Motel.html" title="Motel (module)">Motel</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../MovementStrategies.html" title="Motel::MovementStrategies (module)">MovementStrategies</a></span></span>
     &raquo; 
    <span class="title">Follow</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Motel::MovementStrategies::Follow
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../MovementStrategy.html" title="Motel::MovementStrategy (class)">Motel::MovementStrategy</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../MovementStrategy.html" title="Motel::MovementStrategy (class)">Motel::MovementStrategy</a></span></li>
          
            <li class="next">Motel::MovementStrategies::Follow</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Rotatable.html" title="Motel::MovementStrategies::Rotatable (module)">Rotatable</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/motel/movement_strategies/follow.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>The Follow MovementStrategy follows another location at a specified
distance.</p>

<p>If location is at this distance, it will idle in the same location. If
nearer / further away this will continously calculate the direction vector
to the nearest point the specified distance away from the tracked location
and move in a linear fashion to it.</p>

<p>To be valid, specify tracked_location_id, distance, and speed</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#adjusting_bearing-instance_method" title="#adjusting_bearing (instance method)">- (Object) <strong>adjusting_bearing</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><dl class="rdoc-list label-list"><dt>Boolean
<dd>
<p>Indicates if we have stopped to face the target.</p>
</dd></dl>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#distance-instance_method" title="#distance (instance method)">- (Object) <strong>distance</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Distance away from tracked location to try to maintain.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_target-instance_method" title="#on_target (instance method)">- (Object) <strong>on_target</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><dl class="rdoc-list label-list"><dt>Boolean
<dd>
<p>Indicates if we are close enough to the target to stop.</p>
</dd></dl>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#point_to_target-instance_method" title="#point_to_target (instance method)">- (Object) <strong>point_to_target</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Define if we should rotate to face target.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#rotation_speed-instance_method" title="#rotation_speed (instance method)">- (Object) <strong>rotation_speed</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Optional - Rotation speed.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#speed-instance_method" title="#speed (instance method)">- (Object) <strong>speed</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Distance the location moves per second (when moving).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#tracked_location-instance_method" title="#tracked_location (instance method)">- (Object) <strong>tracked_location</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><dl class="rdoc-list label-list"><dt>Motel::Location
<dd>
<p>location being tracked.</p>
</dd></dl>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#tracked_location_id-instance_method" title="#tracked_location_id (instance method)">- (Object) <strong>tracked_location_id</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><dl class="rdoc-list label-list"><dt>String
<dd>
<p>ID of location which is being tracked.</p>
</dd></dl>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes included from <span class='object_link'><a href="Rotatable.html" title="Motel::MovementStrategies::Rotatable (module)">Rotatable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Rotatable.html#rot_theta-instance_method" title="Motel::MovementStrategies::Rotatable#rot_theta (method)">#rot_theta</a></span>, <span class='object_link'><a href="Rotatable.html#rot_x-instance_method" title="Motel::MovementStrategies::Rotatable#rot_x (method)">#rot_x</a></span>, <span class='object_link'><a href="Rotatable.html#rot_y-instance_method" title="Motel::MovementStrategies::Rotatable#rot_y (method)">#rot_y</a></span>, <span class='object_link'><a href="Rotatable.html#rot_z-instance_method" title="Motel::MovementStrategies::Rotatable#rot_z (method)">#rot_z</a></span>, <span class='object_link'><a href="Rotatable.html#stop_angle-instance_method" title="Motel::MovementStrategies::Rotatable#stop_angle (method)">#stop_angle</a></span></p>

  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../MovementStrategy.html" title="Motel::MovementStrategy (class)">Motel::MovementStrategy</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../MovementStrategy.html#step_delay-instance_method" title="Motel::MovementStrategy#step_delay (method)">#step_delay</a></span></p>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Follow) <strong>initialize</strong>(args = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Motel::MovementStrategies::Follow initializer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#move-instance_method" title="#move (instance method)">- (Object) <strong>move</strong>(loc, elapsed_seconds) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Implementation of <span class='object_link'><a href="../MovementStrategy.html#move-instance_method" title="Motel::MovementStrategy#move (method)">Motel::MovementStrategy#move</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_json-instance_method" title="#to_json (instance method)">- (Object) <strong>to_json</strong>(*a) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert movement strategy to json representation and return it.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (Object) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert movement strategy to human readable string and return it.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#valid%3F-instance_method" title="#valid? (instance method)">- (Boolean) <strong>valid?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return boolean indicating if this movement strategy is valid.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Rotatable.html" title="Motel::MovementStrategies::Rotatable (module)">Rotatable</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Rotatable.html#change_due_to_rotation%3F-instance_method" title="Motel::MovementStrategies::Rotatable#change_due_to_rotation? (method)">#change_due_to_rotation?</a></span>, <span class='object_link'><a href="Rotatable.html#init_rotation-instance_method" title="Motel::MovementStrategies::Rotatable#init_rotation (method)">#init_rotation</a></span>, <span class='object_link'><a href="Rotatable.html#rot_to_s-instance_method" title="Motel::MovementStrategies::Rotatable#rot_to_s (method)">#rot_to_s</a></span>, <span class='object_link'><a href="Rotatable.html#rotate-instance_method" title="Motel::MovementStrategies::Rotatable#rotate (method)">#rotate</a></span>, <span class='object_link'><a href="Rotatable.html#rotation_json-instance_method" title="Motel::MovementStrategies::Rotatable#rotation_json (method)">#rotation_json</a></span>, <span class='object_link'><a href="Rotatable.html#valid_rotation%3F-instance_method" title="Motel::MovementStrategies::Rotatable#valid_rotation? (method)">#valid_rotation?</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../MovementStrategy.html" title="Motel::MovementStrategy (class)">Motel::MovementStrategy</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../MovementStrategy.html#change%3F-instance_method" title="Motel::MovementStrategy#change? (method)">#change?</a></span>, <span class='object_link'><a href="../MovementStrategy.html#json_create-class_method" title="Motel::MovementStrategy.json_create (method)">json_create</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Motel::MovementStrategies::Follow (class)">Follow</a></span></tt>) <strong>initialize</strong>(args = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Motel::MovementStrategies::Follow initializer</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>hash of options to initialize the follow movement strategy with</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>args</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:tracked_location_id,'tracked_location_id'</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>id of the location to track</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:tracked_location,'tracked_location'</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>handle to the location to track</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:distance,'distance'</span>
          <span class="type">(<tt><span class='object_link'><a href="../../Float.html" title="Float (class)">Float</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>distance away from the tracked location to try to maintain</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:speed,'speed'</span>
          <span class="type">(<tt><span class='object_link'><a href="../../Float.html" title="Float (class)">Float</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>speed to assign to the movement strategy</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:point_to_target,</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>define if we should rotate to face the target</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../InvalidMovementStrategy.html" title="Motel::InvalidMovementStrategy (class)">Motel::InvalidMovementStrategy</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>if movement strategy is not valid (see <span class='object_link'><a href="#valid%3F-instance_method" title="Motel::MovementStrategies::Follow#valid? (method)">#valid?</a></span>)</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


68
69
70
71
72
73
74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 68</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attr_from_args'>attr_from_args</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='symbol'>:distance</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:speed</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
                       <span class='symbol'>:tracked_location_id</span>     <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
                       <span class='symbol'>:point_to_target</span>         <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
                       <span class='symbol'>:rotation_speed</span>          <span class='op'>=&gt;</span> <span class='int'>1</span>
  <span class='comment'># If we have to point to the target, do so before moving
</span>  <span class='ivar'>@adjusting_bearing</span> <span class='op'>=</span> <span class='ivar'>@point_to_target</span>
  <span class='ivar'>@on_target</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='comment'># Asume we haven&#39;t arrived at the target at first
</span>  <span class='id identifier rubyid_init_rotation'>init_rotation</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="adjusting_bearing-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>adjusting_bearing</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <dl class="rdoc-list label-list"><dt>Boolean
<dd>
<p>Indicates if we have stopped to face the target</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_adjusting_bearing'>adjusting_bearing</span>
  <span class='ivar'>@adjusting_bearing</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="distance=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="distance-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>distance</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Distance away from tracked location to try to maintain</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 48</span>

<span class='kw'>def</span> <span class='id identifier rubyid_distance'>distance</span>
  <span class='ivar'>@distance</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="on_target-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>on_target</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <dl class="rdoc-list label-list"><dt>Boolean
<dd>
<p>Indicates if we are close enough to the target to stop</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_target'>on_target</span>
  <span class='ivar'>@on_target</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="point_to_target=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="point_to_target-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>point_to_target</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Define if we should rotate to face target</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_point_to_target'>point_to_target</span>
  <span class='ivar'>@point_to_target</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="rotation_speed=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="rotation_speed-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>rotation_speed</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Optional - Rotation speed</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rotation_speed'>rotation_speed</span>
  <span class='ivar'>@rotation_speed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="speed=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="speed-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>speed</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Distance the location moves per second (when moving)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 51</span>

<span class='kw'>def</span> <span class='id identifier rubyid_speed'>speed</span>
  <span class='ivar'>@speed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="tracked_location=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="tracked_location-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>tracked_location</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <dl class="rdoc-list label-list"><dt>Motel::Location
<dd>
<p>location being tracked</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tracked_location'>tracked_location</span>
  <span class='ivar'>@tracked_location</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="tracked_location_id=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="tracked_location_id-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>tracked_location_id</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <dl class="rdoc-list label-list"><dt>String
<dd>
<p>ID of location which is being tracked</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tracked_location_id'>tracked_location_id</span>
  <span class='ivar'>@tracked_location_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="move-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>move</strong>(loc, elapsed_seconds) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Implementation of <span class='object_link'><a href="../MovementStrategy.html#move-instance_method" title="Motel::MovementStrategy#move (method)">Motel::MovementStrategy#move</a></span></p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_move'>move</span><span class='lparen'>(</span><span class='id identifier rubyid_loc'>loc</span><span class='comma'>,</span> <span class='id identifier rubyid_elapsed_seconds'>elapsed_seconds</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_valid?'>valid?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_tracked_location'>tracked_location</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='op'>::</span><span class='const'>RJR</span><span class='op'>::</span><span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>follow movement strategy not valid, not proceeding with move</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_tl'>tl</span> <span class='op'>=</span> <span class='id identifier rubyid_tracked_location'>tracked_location</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_tl'>tl</span><span class='period'>.</span><span class='id identifier rubyid_parent_id'>parent_id</span> <span class='op'>==</span> <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_parent_id'>parent_id</span>
    <span class='op'>::</span><span class='const'>RJR</span><span class='op'>::</span><span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>follow movement strategy is set to track location with different parent than the one being moved</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>

  <span class='op'>::</span><span class='const'>RJR</span><span class='op'>::</span><span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>moving location </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'> via follow movement strategy </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_speed'>speed</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tracked_location_id'>tracked_location_id</span> <span class='embexpr_end'>}</span><span class='tstring_content'> at </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_distance'>distance</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_distance_to_cover'>distance_to_cover</span>  <span class='op'>=</span> <span class='id identifier rubyid_loc'>loc</span> <span class='op'>-</span> <span class='id identifier rubyid_tl'>tl</span>

  <span class='ivar'>@on_target</span> <span class='op'>=</span> <span class='id identifier rubyid_distance_to_cover'>distance_to_cover</span> <span class='op'>&lt;=</span> <span class='ivar'>@distance</span>

  <span class='kw'>if</span> <span class='ivar'>@point_to_target</span>
    <span class='comment'># Calculate orientation difference
</span>    <span class='comment'># TODO separate this logic into helper
</span>    <span class='id identifier rubyid_od'>od</span> <span class='op'>=</span> <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_orientation_difference'>orientation_difference</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_tl'>tl</span><span class='period'>.</span><span class='id identifier rubyid_coordinates'>coordinates</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_od'>od</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span> <span class='op'>&gt;</span> <span class='lparen'>(</span><span class='const'>Math</span><span class='op'>::</span><span class='const'>PI</span> <span class='op'>/</span> <span class='int'>32</span><span class='rparen'>)</span>
      <span class='comment'># TODO right now this makes sure we can move and change rotation
</span>      <span class='comment'># at the same time. In the future, we should probably do some math 
</span>      <span class='comment'># to figure out intercept trajectories
</span>      <span class='ivar'>@adjusting_bearing</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@on_target</span>
      <span class='id identifier rubyid_init_rotation'>init_rotation</span> <span class='symbol'>:rot_theta</span> <span class='op'>=&gt;</span>  <span class='id identifier rubyid_od'>od</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='ivar'>@rotation_speed</span><span class='comma'>,</span>
                    <span class='symbol'>:rot_x</span>     <span class='op'>=&gt;</span>  <span class='id identifier rubyid_od'>od</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:rot_y</span>     <span class='op'>=&gt;</span>  <span class='id identifier rubyid_od'>od</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span>
                    <span class='symbol'>:rot_z</span>     <span class='op'>=&gt;</span>  <span class='id identifier rubyid_od'>od</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_valid_rotation?'>valid_rotation?</span>
        <span class='id identifier rubyid_rotate'>rotate</span> <span class='id identifier rubyid_loc'>loc</span><span class='comma'>,</span> <span class='id identifier rubyid_elapsed_seconds'>elapsed_seconds</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='ivar'>@adjusting_bearing</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='ivar'>@on_target</span> <span class='op'>||</span> <span class='ivar'>@adjusting_bearing</span>
    <span class='comment'>#::RJR::Logger.warn &quot;#{location} within #{@distance} of #{tl}&quot;
</span>    <span class='comment'># TODO orbit the location or similar?
</span>
  <span class='kw'>else</span>
    <span class='comment'># calculate direction of tracked location
</span>    <span class='id identifier rubyid_dx'>dx</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_tl'>tl</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span> <span class='op'>-</span> <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_distance_to_cover'>distance_to_cover</span>
    <span class='id identifier rubyid_dy'>dy</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_tl'>tl</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>-</span> <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_distance_to_cover'>distance_to_cover</span>
    <span class='id identifier rubyid_dz'>dz</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_tl'>tl</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span> <span class='op'>-</span> <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_distance_to_cover'>distance_to_cover</span>

    <span class='comment'># calculate distance and update x,y,z accordingly
</span>    <span class='id identifier rubyid_distance'>distance</span> <span class='op'>=</span> <span class='id identifier rubyid_speed'>speed</span> <span class='op'>*</span> <span class='id identifier rubyid_elapsed_seconds'>elapsed_seconds</span>

    <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span> <span class='op'>+=</span> <span class='id identifier rubyid_distance'>distance</span> <span class='op'>*</span> <span class='id identifier rubyid_dx'>dx</span>
    <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span> <span class='op'>+=</span> <span class='id identifier rubyid_distance'>distance</span> <span class='op'>*</span> <span class='id identifier rubyid_dy'>dy</span>
    <span class='id identifier rubyid_loc'>loc</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span> <span class='op'>+=</span> <span class='id identifier rubyid_distance'>distance</span> <span class='op'>*</span> <span class='id identifier rubyid_dz'>dz</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_json-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_json</strong>(*a) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Convert movement strategy to json representation and return it</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


156
157
158
159
160
161
162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 156</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_json'>to_json</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>
  <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json_class</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span>       <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:step_delay</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_step_delay'>step_delay</span><span class='comma'>,</span>
                      <span class='symbol'>:speed</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_speed'>speed</span><span class='comma'>,</span>
                      <span class='symbol'>:tracked_location_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_tracked_location_id'>tracked_location_id</span><span class='comma'>,</span>
                      <span class='symbol'>:distance</span>            <span class='op'>=&gt;</span> <span class='id identifier rubyid_distance'>distance</span><span class='comma'>,</span>
                      <span class='symbol'>:point_to_target</span>     <span class='op'>=&gt;</span> <span class='id identifier rubyid_point_to_target'>point_to_target</span><span class='comma'>,</span>
                      <span class='symbol'>:rotation_speed</span>      <span class='op'>=&gt;</span> <span class='id identifier rubyid_rotation_speed'>rotation_speed</span><span class='comma'>,</span>
                      <span class='symbol'>:on_target</span>           <span class='op'>=&gt;</span> <span class='id identifier rubyid_on_target'>on_target</span><span class='comma'>,</span>
                      <span class='symbol'>:adjusting_bearing</span>   <span class='op'>=&gt;</span> <span class='id identifier rubyid_adjusting_bearing'>adjusting_bearing</span>
                    <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_rotation_json'>rotation_json</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_s</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Convert movement strategy to human readable string and return it</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 171</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>follow-(</span><span class='embexpr_beg'>#{</span><span class='ivar'>@tracked_location_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> at </span><span class='embexpr_beg'>#{</span><span class='ivar'>@distance</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="valid?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>valid?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return boolean indicating if this movement strategy is valid</p>

<p>Tests the various attributes of the follow movement strategy, returning
&#39;true&#39; if everything is consistent, else false.</p>

<p>Currently tests</p>
<ul><li>
<p>tracked location id is not nil</p>
</li><li>
<p>speed is a valid numeric &gt; 0</p>
</li><li>
<p>distance is a valid numeric &gt; 0</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/motel/movement_strategies/follow.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_valid?'>valid?</span>
  <span class='op'>!</span><span class='ivar'>@tracked_location_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span>
  <span class='ivar'>@speed</span><span class='period'>.</span><span class='id identifier rubyid_numeric?'>numeric?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@speed</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span>
  <span class='ivar'>@distance</span><span class='period'>.</span><span class='id identifier rubyid_numeric?'>numeric?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@distance</span> <span class='op'>&gt;</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Feb 21 16:44:39 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-2.0.0).
</div>

  </body>
</html>