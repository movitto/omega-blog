<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Missions::Mission
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Missions.html" title="Missions (module)">Missions</a></span></span>
     &raquo; 
    <span class="title">Mission</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Missions::Mission
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Missions::Mission</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/missions/mission.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Set of objectives created by a user (usually a npc) and assigned to another
for completion.</p>

<p>Incorprates callbacks to determine if user is eligable to accept mission,
if/when mission is completed, and to run handlers at various points during
the mission cycle.</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="CALLBACKS-constant" class="">CALLBACKS =
          <div class="docstring">
  <div class="discussion">
    
<p>Attributes which correspond to mission cycle callbacks</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:requirements</span><span class='comma'>,</span> <span class='symbol'>:assignment_callbacks</span><span class='comma'>,</span> <span class='symbol'>:victory_conditions</span><span class='comma'>,</span>
<span class='symbol'>:victory_callbacks</span><span class='comma'>,</span> <span class='symbol'>:failure_callbacks</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigned_time-instance_method" title="#assigned_time (instance method)">- (Object) <strong>assigned_time</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Time mission was assigned to user.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigned_to-instance_method" title="#assigned_to (instance method)">- (Object) <strong>assigned_to</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Handle to Users::User who is assigned to the mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigned_to_id-instance_method" title="#assigned_to_id (instance method)">- (Object) <strong>assigned_to_id</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Id of user who is assigned to the mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#assignment_callbacks-instance_method" title="#assignment_callbacks (instance method)">- (Object) <strong>assignment_callbacks</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Array of callbacks which to invoke on assignment.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#creator-instance_method" title="#creator (instance method)">- (Object) <strong>creator</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Handle to Users::User who created the mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#creator_id-instance_method" title="#creator_id (instance method)">- (Object) <strong>creator_id</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Id of user who created the mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#description-instance_method" title="#description (instance method)">- (Object) <strong>description</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Description of the mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#failed-instance_method" title="#failed (instance method)">- (Object) <strong>failed</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Boolean indicating if user was failed mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#failure_callbacks-instance_method" title="#failure_callbacks (instance method)">- (Object) <strong>failure_callbacks</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Array of callbacks which to invoke on failure.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">- (Object) <strong>id</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Unique string id of the mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#mission_data-instance_method" title="#mission_data (instance method)">- (Object) <strong>mission_data</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generic key/value store for data in the mission context, for use by the
various callbacks.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#orig_callbacks-instance_method" title="#orig_callbacks (instance method)">- (Object) <strong>orig_callbacks</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Original callbacks registered with mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#requirements-instance_method" title="#requirements (instance method)">- (Object) <strong>requirements</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Array of mission assignment requirements.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#timeout-instance_method" title="#timeout (instance method)">- (Object) <strong>timeout</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Time user has to complete mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#title-instance_method" title="#title (instance method)">- (Object) <strong>title</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Title of the mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#victorious-instance_method" title="#victorious (instance method)">- (Object) <strong>victorious</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Boolean indicating if user was victorious in mission.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#victory_callbacks-instance_method" title="#victory_callbacks (instance method)">- (Object) <strong>victory_callbacks</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Array of callbacks which to invoke on victory.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#victory_conditions-instance_method" title="#victory_conditions (instance method)">- (Object) <strong>victory_conditions</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Array of mission victory conditions.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#json_create-class_method" title="json_create (class method)">+ (Object) <strong>json_create</strong>(o) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create new mission from json representation.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#active%3F-instance_method" title="#active? (instance method)">- (Boolean) <strong>active?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Retuns boolean indicating if mission is active, eg assigned, not expired
and not victorious / failed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_to-instance_method" title="#assign_to (instance method)">- (Object) <strong>assign_to</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Assign mission to the specified user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assignable_to%3F-instance_method" title="#assignable_to? (instance method)">- (Boolean) <strong>assignable_to?</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return boolean indicating if user meets requirements to be assigned to this
mission.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigned%3F-instance_method" title="#assigned? (instance method)">- (Boolean) <strong>assigned?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return boolean indicating if mission is assigned.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigned_to%3F-instance_method" title="#assigned_to? (instance method)">- (Boolean) <strong>assigned_to?</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return boolean indicating if mission is assigned to the the specified user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_assignment%21-instance_method" title="#clear_assignment! (instance method)">- (Object) <strong>clear_assignment!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clear mission assignment.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clone-instance_method" title="#clone (instance method)">- (Object) <strong>clone</strong>(args = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return a copy of this mission, setting any additional attributes given.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#completed%3F-instance_method" title="#completed? (instance method)">- (Boolean) <strong>completed?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns boolean indicating if mission was completed or not.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#expired%3F-instance_method" title="#expired? (instance method)">- (Boolean) <strong>expired?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns boolean indicating if time to complete mission has expired.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#failed%21-instance_method" title="#failed! (instance method)">- (Object) <strong>failed!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set mission failure to true.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Mission) <strong>initialize</strong>(args = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Mission initializer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#restore_callbacks-instance_method" title="#restore_callbacks (instance method)">- (Object) <strong>restore_callbacks</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Restore callbacks from orig_callbacks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#store_callbacks-instance_method" title="#store_callbacks (instance method)">- (Object) <strong>store_callbacks</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Store current callbacks to orig_callbacks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_json-instance_method" title="#to_json (instance method)">- (Object) <strong>to_json</strong>(*a) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert mission to json representation and return it.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (Object) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Convert mission to human readable string and return it.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (Object) <strong>update</strong>(args = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Update the mission from the specified args.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#victory%21-instance_method" title="#victory! (instance method)">- (Object) <strong>victory!</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set mission victory to true.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Missions::Mission (class)">Mission</a></span></tt>) <strong>initialize</strong>(args = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Mission initializer</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>hash of options to initialize mission with</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>args</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:id,'id'</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>id to assign to the mission</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:title,'title'</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>title of the mission</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:description,'description'</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>description of the mission</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:creator_id,'creator_id'</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>id of user that created the mission</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:assigned_to_id,'assigned_to_id'</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>id of user that the mission is assigned to</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:assigned_time,'assigned_time'</span>
          <span class="type">(<tt>Time</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>time the mission was assigned to user</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:timeout,'timeout'</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>seconds which mission assignment is valid for</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:orig_callbacks,'orig_callbacks'</span>
          <span class="type">(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>callbacks which to register with orig_callbacks</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:requirements,'requirements'</span>
          <span class="type">(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>,Callables&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>requirements which to validate upon assigning mission</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:assignment_callbacks,'assignment_callbacks'</span>
          <span class="type">(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>,Callables&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>callbacks which to invoke upon assigning mission</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:victory_conditions,'victory_conditions'</span>
          <span class="type">(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>,Callables&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>conditions which to determine if mission is completed</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:victory_callbacks,'victory_callbacks'</span>
          <span class="type">(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>,Callables&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>callbacks which to invoke upon successful mission completion</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:failure_callbacks,'failure_callbacks'</span>
          <span class="type">(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>,Callables&gt;</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>callbacks which to invoke upon mission failure</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:mission,</span>
          <span class="type">(<tt><span class='object_link'><a href="" title="Missions::Mission (class)">Missions::Mission</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>&#39;mission&#39; mission to copy attributes from</p>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attr_from_args'>attr_from_args</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span>
    <span class='symbol'>:id</span>                   <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:title</span>                <span class='op'>=&gt;</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:description</span>          <span class='op'>=&gt;</span>  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:mission_data</span>         <span class='op'>=&gt;</span>  <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='symbol'>:creator_id</span>      <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:assigned_to_id</span>       <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:assigned_time</span>        <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:timeout</span>              <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='symbol'>:orig_callbacks</span>       <span class='op'>=&gt;</span>  <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='symbol'>:requirements</span>         <span class='op'>=&gt;</span>  <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='symbol'>:assignment_callbacks</span> <span class='op'>=&gt;</span>  <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='symbol'>:victory_conditions</span>   <span class='op'>=&gt;</span>  <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='symbol'>:victory_callbacks</span>    <span class='op'>=&gt;</span>  <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='symbol'>:failure_callbacks</span>    <span class='op'>=&gt;</span>  <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='symbol'>:victorious</span>           <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span>
    <span class='symbol'>:failed</span>               <span class='op'>=&gt;</span> <span class='kw'>false</span>

  <span class='ivar'>@assigned_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='ivar'>@assigned_time</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@assigned_time</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>

  <span class='comment'># convert all mission data keys to strings
</span>  <span class='ivar'>@mission_data</span><span class='period'>.</span><span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
      <span class='ivar'>@mission_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@mission_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span>
      <span class='ivar'>@mission_data</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>

  <span class='const'>CALLBACKS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_cb'>cb</span><span class='op'>|</span>
    <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cb'>cb</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_intern'>intern</span>
    <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="assigned_time=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="assigned_time-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>assigned_time</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Time mission was assigned to user</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 122</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigned_time'>assigned_time</span>
  <span class='ivar'>@assigned_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="assigned_to=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="assigned_to-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>assigned_to</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Handle to Users::User who is assigned to the mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 102</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigned_to'>assigned_to</span>
  <span class='ivar'>@assigned_to</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="assigned_to_id=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="assigned_to_id-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>assigned_to_id</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Id of user who is assigned to the mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigned_to_id'>assigned_to_id</span>
  <span class='ivar'>@assigned_to_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="assignment_callbacks=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="assignment_callbacks-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>assignment_callbacks</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Array of callbacks which to invoke on assignment</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assignment_callbacks'>assignment_callbacks</span>
  <span class='ivar'>@assignment_callbacks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="creator=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="creator-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>creator</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Handle to Users::User who created the mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_creator'>creator</span>
  <span class='ivar'>@creator</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="creator_id=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="creator_id-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>creator_id</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Id of user who created the mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_creator_id'>creator_id</span>
  <span class='ivar'>@creator_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="description=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="description-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>description</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Description of the mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_description'>description</span>
  <span class='ivar'>@description</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="failed=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="failed-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>failed</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Boolean indicating if user was failed mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 149</span>

<span class='kw'>def</span> <span class='id identifier rubyid_failed'>failed</span>
  <span class='ivar'>@failed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="failure_callbacks=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="failure_callbacks-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>failure_callbacks</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Array of callbacks which to invoke on failure</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 188</span>

<span class='kw'>def</span> <span class='id identifier rubyid_failure_callbacks'>failure_callbacks</span>
  <span class='ivar'>@failure_callbacks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="id=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="id-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>id</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Unique string id of the mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_id'>id</span>
  <span class='ivar'>@id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="mission_data=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="mission_data-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>mission_data</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generic key/value store for data in the mission context, for use by the
various callbacks</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 56</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mission_data'>mission_data</span>
  <span class='ivar'>@mission_data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="orig_callbacks=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="orig_callbacks-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>orig_callbacks</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Original callbacks registered with mission. Used to restore missions from
json backups and such</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_orig_callbacks'>orig_callbacks</span>
  <span class='ivar'>@orig_callbacks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="requirements=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="requirements-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>requirements</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Array of mission assignment requirements</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_requirements'>requirements</span>
  <span class='ivar'>@requirements</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="timeout=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="timeout-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>timeout</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Time user has to complete mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 130</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timeout'>timeout</span>
  <span class='ivar'>@timeout</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="title=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="title-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>title</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Title of the mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_title'>title</span>
  <span class='ivar'>@title</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="victorious=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="victorious-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>victorious</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Boolean indicating if user was victorious in mission</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 146</span>

<span class='kw'>def</span> <span class='id identifier rubyid_victorious'>victorious</span>
  <span class='ivar'>@victorious</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="victory_callbacks=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="victory_callbacks-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>victory_callbacks</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Array of callbacks which to invoke on victory</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_victory_callbacks'>victory_callbacks</span>
  <span class='ivar'>@victory_callbacks</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="victory_conditions=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="victory_conditions-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>victory_conditions</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Array of mission victory conditions</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_victory_conditions'>victory_conditions</span>
  <span class='ivar'>@victory_conditions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="json_create-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>json_create</strong>(o) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create new mission from json representation</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


314
315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 314</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_json_create'>json_create</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mission'>mission</span> <span class='op'>=</span> <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_o'>o</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_mission'>mission</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="active?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>active?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Retuns boolean indicating if mission is active, eg assigned, not expired
and not victorious / failed</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 153</span>

<span class='kw'>def</span> <span class='id identifier rubyid_active?'>active?</span>
  <span class='id identifier rubyid_assigned?'>assigned?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_expired?'>expired?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_victorious'>victorious</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_failed'>failed</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign_to-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>assign_to</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Assign mission to the specified user</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 114</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assign_to'>assign_to</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assignable_to?'>assignable_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='ivar'>@assigned_to</span>    <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span>
  <span class='ivar'>@assigned_to_id</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='ivar'>@assigned_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assignable_to?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>assignable_to?</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return boolean indicating if user meets requirements to be assigned to this
mission</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


80
81
82
83
84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 80</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assignable_to?'>assignable_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='ivar'>@assigned_to_id</span> <span class='op'>&amp;&amp;</span>
  <span class='ivar'>@requirements</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_req'>req</span><span class='op'>|</span>
    <span class='comment'># TODO catch exceptions (return false if any?)
</span>    <span class='id identifier rubyid_req'>req</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_user'>user</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assigned?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>assigned?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return boolean indicating if mission is assigned</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigned?'>assigned?</span>
  <span class='op'>!</span><span class='ivar'>@assigned_to_id</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assigned_to?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>assigned_to?</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return boolean indicating if mission is assigned to the the specified user</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigned_to?'>assigned_to?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Users</span><span class='op'>::</span><span class='const'>User</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='ivar'>@assigned_to_id</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='ivar'>@assigned_to_id</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clear_assignment!-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>clear_assignment!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clear mission assignment</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 139</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clear_assignment!'>clear_assignment!</span>
  <span class='ivar'>@assigned_to</span>    <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@assigned_to_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@assigned_time</span>  <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clone-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>clone</strong>(args = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return a copy of this mission, setting any additional attributes given</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283
284
285</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 281</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clone'>clone</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='const'>Mission</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:mission</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_m'>m</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="completed?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>completed?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns boolean indicating if mission was completed or not</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_completed?'>completed?</span>
  <span class='ivar'>@victory_conditions</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_vc'>vc</span><span class='op'>|</span>
    <span class='id identifier rubyid_vc'>vc</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>self</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="expired?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>expired?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns boolean indicating if time to complete mission has expired</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 134</span>

<span class='kw'>def</span> <span class='id identifier rubyid_expired?'>expired?</span>
  <span class='id identifier rubyid_assigned?'>assigned?</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='ivar'>@assigned_time</span> <span class='op'>+</span> <span class='ivar'>@timeout</span><span class='rparen'>)</span> <span class='op'>&lt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="failed!-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>failed!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set mission failure to true</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RuntimeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_failed!'>failed!</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be assigned</span><span class='tstring_end'>&quot;</span></span>             <span class='kw'>unless</span> <span class='id identifier rubyid_assigned?'>assigned?</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cannot already be victorious</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@victorious</span>
  <span class='ivar'>@victorious</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@failed</span>     <span class='op'>=</span> <span class='kw'>true</span>

  <span class='ivar'>@failure_callbacks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_fcb'>fcb</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_fcb'>fcb</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>self</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='op'>::</span><span class='const'>RJR</span><span class='op'>::</span><span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error in mission </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'> failure: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="restore_callbacks-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>restore_callbacks</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Restore callbacks from orig_callbacks</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_restore_callbacks'>restore_callbacks</span>
  <span class='const'>CALLBACKS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_cb'>cb</span><span class='op'>|</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_set'>instance_variable_set</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cb'>cb</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_intern'>intern</span><span class='comma'>,</span> <span class='ivar'>@orig_callbacks</span><span class='lbracket'>[</span><span class='id identifier rubyid_cb'>cb</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="store_callbacks-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>store_callbacks</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Store current callbacks to orig_callbacks</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_store_callbacks'>store_callbacks</span>
  <span class='ivar'>@orig_callbacks</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='const'>CALLBACKS</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_cb'>cb</span><span class='op'>|</span>
    <span class='ivar'>@orig_callbacks</span><span class='lbracket'>[</span><span class='id identifier rubyid_cb'>cb</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_instance_variable_get'>instance_variable_get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cb'>cb</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_intern'>intern</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_json-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_json</strong>(*a) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Convert mission to json representation and return it</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 288</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_json'>to_json</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>
  <span class='lbrace'>{</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json_class</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>data</span><span class='tstring_end'>&#39;</span></span>       <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
                     <span class='symbol'>:title</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='symbol'>:description</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_description'>description</span><span class='comma'>,</span>
                     <span class='symbol'>:mission_data</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_mission_data'>mission_data</span><span class='comma'>,</span>
                     <span class='symbol'>:creator_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_creator_id'>creator_id</span><span class='comma'>,</span>
                     <span class='symbol'>:assigned_to_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_assigned_to_id'>assigned_to_id</span><span class='comma'>,</span>
                     <span class='symbol'>:timeout</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_timeout'>timeout</span><span class='comma'>,</span>
                     <span class='symbol'>:assigned_time</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_assigned_time'>assigned_time</span><span class='comma'>,</span>
                     <span class='symbol'>:orig_callbacks</span>       <span class='op'>=&gt;</span> <span class='id identifier rubyid_orig_callbacks'>orig_callbacks</span><span class='comma'>,</span>
                     <span class='symbol'>:requirements</span>         <span class='op'>=&gt;</span> <span class='id identifier rubyid_requirements'>requirements</span><span class='comma'>,</span>
                     <span class='symbol'>:assignment_callbacks</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_assignment_callbacks'>assignment_callbacks</span><span class='comma'>,</span>
                     <span class='symbol'>:victory_conditions</span>   <span class='op'>=&gt;</span> <span class='id identifier rubyid_victory_conditions'>victory_conditions</span><span class='comma'>,</span>
                     <span class='symbol'>:victory_callbacks</span>    <span class='op'>=&gt;</span> <span class='id identifier rubyid_victory_callbacks'>victory_callbacks</span><span class='comma'>,</span>
                     <span class='symbol'>:failure_callbacks</span>    <span class='op'>=&gt;</span> <span class='id identifier rubyid_failure_callbacks'>failure_callbacks</span><span class='comma'>,</span>
                     <span class='symbol'>:victorious</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_victorious'>victorious</span><span class='comma'>,</span> <span class='symbol'>:failed</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_failed'>failed</span><span class='rbrace'>}</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_s</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Convert mission to human readable string and return it</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 309</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mission-</span><span class='embexpr_beg'>#{</span><span class='ivar'>@id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update</strong>(args = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Update the mission from the specified args</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>above for valid options accepted by update</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267
268
269
270
271
272
273
274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_attrs'>attrs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:title</span><span class='comma'>,</span> <span class='symbol'>:description</span><span class='comma'>,</span> <span class='symbol'>:mission_data</span><span class='comma'>,</span>
           <span class='symbol'>:creator_id</span><span class='comma'>,</span> <span class='symbol'>:assigned_to_id</span><span class='comma'>,</span> <span class='symbol'>:assigned_time</span><span class='comma'>,</span>
           <span class='symbol'>:timeout</span><span class='comma'>,</span> <span class='symbol'>:requirements</span><span class='comma'>,</span> <span class='symbol'>:assignment_callbacks</span><span class='comma'>,</span>
           <span class='symbol'>:victory_conditions</span><span class='comma'>,</span> <span class='symbol'>:victory_callbacks</span><span class='comma'>,</span>
           <span class='symbol'>:failure_callbacks</span><span class='comma'>,</span> <span class='symbol'>:victorious</span><span class='comma'>,</span>
           <span class='symbol'>:failed</span><span class='rbracket'>]</span>

  <span class='lbracket'>[</span><span class='symbol'>:mission</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mission</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_mission'>mission</span><span class='op'>|</span>
    <span class='id identifier rubyid_update_from'>update_from</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='id identifier rubyid_mission'>mission</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_args'>args</span><span class='lbracket'>[</span><span class='id identifier rubyid_mission'>mission</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_update_from'>update_from</span><span class='lparen'>(</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_attrs'>attrs</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="victory!-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>victory!</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set mission victory to true</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>RuntimeError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177
178
179
180
181
182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/missions/mission.rb', line 172</span>

<span class='kw'>def</span> <span class='id identifier rubyid_victory!'>victory!</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be assigned</span><span class='tstring_end'>&quot;</span></span>         <span class='kw'>unless</span> <span class='id identifier rubyid_assigned?'>assigned?</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cannot already be failed</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='ivar'>@failed</span>
  <span class='ivar'>@victorious</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@failed</span>     <span class='op'>=</span> <span class='kw'>false</span>

  <span class='ivar'>@victory_callbacks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_vcb'>vcb</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_vcb'>vcb</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span> <span class='kw'>self</span>
    <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='op'>::</span><span class='const'>RJR</span><span class='op'>::</span><span class='const'>Logger</span><span class='period'>.</span><span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error in mission </span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'> victory: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Feb 21 16:44:36 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.5.2 (ruby-2.0.0).
</div>

  </body>
</html>